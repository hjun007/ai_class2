<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>学伴AI:个性化智学平台</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes pulse-title {
            0%, 100% { transform: scale(1); opacity: 0.3; }
            50% { transform: scale(1.1); opacity: 0.6; }
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }
        
        @keyframes float-icon {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-8px); }
        }
        
        @keyframes bounce-hover {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-6px); }
            60% { transform: translateY(-3px); }
        }
        
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }
        
        @keyframes float-robot {
            0%, 100% { transform: translateY(0px) rotate(0deg) scale(1); }
            25% { transform: translateY(-8px) rotate(2deg) scale(1.02); }
            50% { transform: translateY(-20px) rotate(5deg) scale(1.05); }
            75% { transform: translateY(-8px) rotate(2deg) scale(1.02); }
        }
        
        @keyframes pulse-circuit {
            0%, 100% { opacity: 0.4; transform: scaleX(1); }
            25% { opacity: 0.7; transform: scaleX(1.1); }
            50% { opacity: 0.9; transform: scaleX(1.2); }
            75% { opacity: 0.7; transform: scaleX(1.1); }
        }
        
        @keyframes float-particle {
            0% { transform: translateY(0px) translateX(0px); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-50px) translateX(25px); opacity: 0; }
        }
        
        @keyframes data-flow {
            0% { transform: translateX(-50%); }
            100% { transform: translateX(150%); }
        }
        
        @keyframes data-pulse {
            0%, 100% { transform: translateX(0px) scale(1); opacity: 1; }
            50% { transform: translateX(75px) scale(1.5); opacity: 0.8; }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }
        
        @keyframes fadeOut {
            from { opacity: 1; transform: scale(1); }
            to { opacity: 0; transform: scale(0.9); }
        }
        
        .title::before {
            content: '';
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            background: linear-gradient(45deg, transparent, rgba(33, 150, 243, 0.1), transparent);
            border-radius: 50%;
            animation: pulse-title 3s ease-in-out infinite;
        }
        
        .button-container::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transform: rotate(45deg);
            animation: shimmer 3s ease-in-out infinite;
        }
        
        .float-icon {
            animation: float-icon 2s ease-in-out infinite;
        }
        
        .bounce-hover:hover .float-icon {
            animation: bounce-hover 0.6s ease-in-out infinite;
        }
        
        .rotate-circle {
            animation: rotate 20s linear infinite;
        }
        
        .rotate-reverse {
            animation: rotate 20s linear infinite reverse;
        }
        
        .twinkle {
            animation: twinkle 2s ease-in-out infinite;
        }
        
        .float-robot {
            animation: float-robot 8s ease-in-out infinite;
        }
        
        .float-robot-reverse {
            animation: float-robot 10s ease-in-out infinite reverse;
        }
        
        .pulse-circuit {
            animation: pulse-circuit 4s ease-in-out infinite;
        }
        
        .float-particle {
            animation: float-particle 6s linear infinite;
        }
        
        .data-flow {
            animation: data-flow 3s linear infinite;
        }
        
        .data-pulse {
            animation: data-pulse 3s linear infinite;
        }
        
        .modal-show {
            animation: fadeIn 0.3s ease-out;
        }
        
        .modal-hide {
            animation: fadeOut 0.3s ease-out;
        }
        
        .ai-robot::before {
            content: '';
            position: absolute;
            width: 30px;
            height: 30px;
            background: linear-gradient(135deg, #1976d2, #42a5f5);
            border-radius: 50%;
            top: 0;
            left: 10px;
            box-shadow: inset 0 0 10px rgba(255, 255, 255, 0.2);
        }
        
        .ai-robot::after {
            content: '';
            position: absolute;
            width: 45px;
            height: 40px;
            background: linear-gradient(135deg, #1976d2, #42a5f5);
            border-radius: 5px;
            top: 28px;
            left: 2.5px;
            box-shadow: inset 0 0 8px rgba(255, 255, 255, 0.15);
        }
        
        .ai-robot-2::before {
            content: '';
            position: absolute;
            width: 25px;
            height: 25px;
            background: linear-gradient(135deg, #388e3c, #66bb6a);
            border-radius: 50%;
            top: 0;
            left: 10px;
            box-shadow: inset 0 0 8px rgba(255, 255, 255, 0.2);
        }
        
        .ai-robot-2::after {
            content: '';
            position: absolute;
            width: 35px;
            height: 30px;
            background: linear-gradient(135deg, #388e3c, #66bb6a);
            border-radius: 4px;
            top: 25px;
            left: 5px;
            box-shadow: inset 0 0 6px rgba(255, 255, 255, 0.15);
        }
        
        .ai-circuit::before {
            content: '';
            position: absolute;
            width: 2px;
            height: 30px;
            background: #64b5f6;
            top: -15px;
            left: 50px;
            box-shadow: 0 0 3px rgba(100, 181, 246, 0.7);
        }
        
        .ai-circuit::after {
            content: '';
            position: absolute;
            width: 2px;
            height: 20px;
            background: #64b5f6;
            top: -10px;
            left: 120px;
            box-shadow: 0 0 3px rgba(100, 181, 246, 0.7);
        }
        
        .data-stream::before {
            content: '';
            position: absolute;
            width: 4px;
            height: 4px;
            background: #81c784;
            border-radius: 50%;
            top: -1.5px;
            left: 0;
            animation: data-pulse 3s linear infinite;
        }
        
        /* 确保页面不产生滚动条 */
        html, body {
            height: 100%;
            overflow: hidden;
            margin: 0;
            padding: 0;
        }
    </style>
</head>
<body class="h-screen bg-gradient-to-br from-blue-50 via-blue-25 to-blue-50 flex flex-col items-center p-5 relative overflow-hidden font-sans">
    <!-- 背景装饰圆圈 -->
    <div class="absolute inset-0 pointer-events-none z-0 overflow-hidden">
        <div class="absolute w-80 h-80 -top-24 -left-24 border border-blue-300/20 rounded-full rotate-circle"></div>
        <div class="absolute w-52 h-52 -bottom-12 -right-12 border border-green-400/20 rounded-full rotate-reverse"></div>
        <div class="absolute w-40 h-40 top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 border border-blue-300/15 rounded-full" style="animation: rotate 15s linear infinite;"></div>
    </div>
    
    <!-- AI机器人装饰 -->
    <div class="ai-robot absolute w-12 h-16 top-[15%] left-[8%] opacity-25 float-robot drop-shadow-lg z-0"></div>
    <div class="ai-robot-2 absolute w-11 h-14 bottom-[20%] right-[10%] opacity-20 float-robot-reverse drop-shadow-md z-0"></div>
    
    <!-- 电路装饰 -->
    <div class="ai-circuit absolute w-52 h-0.5 bg-gradient-to-r from-transparent via-blue-400 to-transparent top-[30%] right-[5%] opacity-60 pulse-circuit shadow-sm z-0"></div>
    
    <!-- 粒子动画 -->
    <div class="absolute inset-0 pointer-events-none z-0 overflow-hidden">
        <div class="absolute w-1 h-1 bg-blue-400 rounded-full top-[10%] left-[20%] float-particle"></div>
        <div class="absolute w-1 h-1 bg-blue-400 rounded-full top-[25%] right-[15%] float-particle" style="animation-delay: 1s;"></div>
        <div class="absolute w-1 h-1 bg-blue-400 rounded-full bottom-[30%] left-[25%] float-particle" style="animation-delay: 2s;"></div>
        <div class="absolute w-1 h-1 bg-blue-400 rounded-full bottom-[15%] right-[30%] float-particle" style="animation-delay: 3s;"></div>
        <div class="absolute w-1 h-1 bg-blue-400 rounded-full top-[50%] left-[10%] float-particle" style="animation-delay: 4s;"></div>
        <div class="absolute w-1 h-1 bg-blue-400 rounded-full top-[60%] right-[20%] float-particle" style="animation-delay: 5s;"></div>
    </div>
    
    <!-- 数据流装饰 -->
    <div class="absolute w-40 h-px bg-gradient-to-r from-transparent via-green-400 to-transparent top-[70%] left-[10%] opacity-50 data-flow"></div>
    
    <!-- 闪烁点装饰 -->
    <div class="absolute inset-0 pointer-events-none z-0 overflow-hidden">
        <div class="absolute w-1 h-1 bg-white/30 rounded-full top-[20%] left-[10%] twinkle"></div>
        <div class="absolute w-1 h-1 bg-white/30 rounded-full top-[30%] right-[15%] twinkle" style="animation-delay: 0.5s;"></div>
        <div class="absolute w-1 h-1 bg-white/30 rounded-full bottom-[25%] left-[20%] twinkle" style="animation-delay: 1s;"></div>
        <div class="absolute w-1 h-1 bg-white/30 rounded-full bottom-[35%] right-[25%] twinkle" style="animation-delay: 1.5s;"></div>
        <div class="absolute w-1 h-1 bg-white/30 rounded-full top-[60%] left-[30%] twinkle" style="animation-delay: 2s;"></div>
        <div class="absolute w-1 h-1 bg-white/30 rounded-full top-[70%] right-[35%] twinkle" style="animation-delay: 2.5s;"></div>
    </div>
    
    <!-- 页面标题 -->
    <div class="text-center mb-20 z-10 relative mt-24">
        <h1 class="title text-5xl md:text-6xl text-blue-800 mb-4 font-light tracking-wider relative inline-block" style="text-shadow: 0 0 20px rgba(33, 150, 243, 0.3);">
            学伴AI:个性化智学平台
        </h1>
        <p class="text-xl text-blue-500 font-light tracking-wide opacity-90">让学习变得更有趣，让教学变得更智能</p>
    </div>
    
    <!-- 主要内容区域 -->
    <div class="relative w-full max-w-4xl h-[600px] z-10">
        <!-- 学生空间按钮 -->
        <button onclick="openLoginModal('student')" class="absolute top-32 left-24 w-44 h-44 md:w-48 md:h-48 group bounce-hover transition-all duration-500 ease-out z-20 cursor-pointer">
            <div class="button-container w-full h-full relative rounded-xl flex flex-col items-center justify-center backdrop-blur-lg border border-white/20 shadow-lg overflow-hidden transform -rotate-6 group-hover:rotate-0 group-hover:scale-105 group-hover:shadow-xl transition-all duration-500" style="background: linear-gradient(135deg, rgba(144, 202, 249, 0.8) 0%, rgba(66, 165, 245, 0.8) 100%);">
                <div class="relative z-10 text-center p-5">
                    <div class="text-4xl mb-3 text-blue-900 drop-shadow-md float-icon">🎓</div>
                    <div class="text-xl font-medium mb-1 text-blue-900" style="text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);">学生空间</div>
                    <div class="text-sm opacity-80 font-light text-blue-800">智能学习助手</div>
                </div>
            </div>
        </button>
        
        <!-- 教师空间按钮 -->
        <button onclick="openLoginModal('teacher')" class="absolute bottom-36 right-28 w-40 h-40 md:w-44 md:h-44 group bounce-hover transition-all duration-500 ease-out z-20 cursor-pointer">
            <div class="button-container w-full h-full relative rounded-xl flex flex-col items-center justify-center backdrop-blur-lg border border-white/20 shadow-lg overflow-hidden transform rotate-3 group-hover:rotate-0 group-hover:scale-105 group-hover:shadow-xl transition-all duration-500" style="background: linear-gradient(135deg, rgba(129, 199, 132, 0.8) 0%, rgba(102, 187, 106, 0.8) 100%);">
                <div class="relative z-10 text-center p-5">
                    <div class="text-4xl mb-3 text-green-900 drop-shadow-md float-icon">👨‍🏫</div>
                    <div class="text-xl font-medium mb-1 text-green-900" style="text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);">教师空间</div>
                    <div class="text-sm opacity-80 font-light text-green-800">智慧教学工具</div>
                </div>
            </div>
        </button>
    </div>
    
    <!-- 登录弹窗 -->
    <div id="loginModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md mx-4 modal-show relative">
            <!-- 关闭按钮 -->
            <button onclick="closeLoginModal()" 
                    class="absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition duration-200 z-10">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
            
            <div class="text-center mb-6">
                <div id="modalIcon" class="text-5xl mb-4">🎓</div>
                <h2 id="modalTitle" class="text-2xl font-bold text-gray-800 mb-2">学生登录</h2>
                <p id="modalSubtitle" class="text-gray-600">登录学生空间，开始智能学习之旅</p>
            </div>
            
            <form id="loginForm" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">账号</label>
                    <input type="text" id="username" name="username" required 
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200"
                           placeholder="请输入账号">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">密码</label>
                    <input type="password" id="password" name="password" required 
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200"
                           placeholder="请输入密码">
                </div>
                
                <div class="flex items-center justify-between">
                    <label class="flex items-center">
                        <input type="checkbox" class="rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                        <span class="ml-2 text-sm text-gray-600">记住密码</span>
                    </label>
                    <a href="#" class="text-sm text-blue-600 hover:text-blue-800">忘记密码？</a>
                </div>
                
                <button type="submit" id="loginButton" 
                        class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-lg transition duration-200 transform hover:scale-105">
                    登录
                </button>
            </form>
            
            <div class="mt-6 text-center">
                <p class="text-sm text-gray-600">
                    还没有账号？ 
                    <a href="#" class="text-blue-600 hover:text-blue-800 font-medium">立即注册</a>
                </p>
            </div>
        </div>
    </div>
    
    <!-- 响应式调整 -->
    <style>
        @media (max-width: 768px) {
            .title {
                font-size: 2.8rem !important;
            }
            
            .main-content {
                height: 500px !important;
            }
            
            .student-button {
                top: 30px !important;
                left: 50px !important;
                width: 150px !important;
                height: 150px !important;
            }
            
            .teacher-button {
                bottom: 50px !important;
                right: 50px !important;
                width: 130px !important;
                height: 130px !important;
            }
        }
    </style>
    
    <script>
        let currentUserType = '';
        
        function openLoginModal(userType) {
            currentUserType = userType;
            const modal = document.getElementById('loginModal');
            const modalIcon = document.getElementById('modalIcon');
            const modalTitle = document.getElementById('modalTitle');
            const modalSubtitle = document.getElementById('modalSubtitle');
            const loginButton = document.getElementById('loginButton');
            const loginForm = document.getElementById('loginForm');
            
            if (userType === 'student') {
                modalIcon.textContent = '🎓';
                modalTitle.textContent = '学生登录';
                modalSubtitle.textContent = '登录学生空间，开始智能学习之旅';
                loginButton.className = 'w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-lg transition duration-200 transform hover:scale-105';
                loginForm.action = '/student/login';
            } else {
                modalIcon.textContent = '👨‍🏫';
                modalTitle.textContent = '教师登录';
                modalSubtitle.textContent = '登录教师空间，开启智慧教学模式';
                loginButton.className = 'w-full bg-green-600 hover:bg-green-700 text-white font-medium py-3 px-4 rounded-lg transition duration-200 transform hover:scale-105';
                loginForm.action = '/teacher/login';
            }
            
            modal.classList.remove('hidden');
            
            // 聚焦到用户名输入框
            setTimeout(() => {
                document.getElementById('username').focus();
            }, 100);
        }
        
        function closeLoginModal() {
            const modal = document.getElementById('loginModal');
            const modalContent = modal.querySelector('.bg-white');
            
            modalContent.classList.remove('modal-show');
            modalContent.classList.add('modal-hide');
            
            setTimeout(() => {
                modal.classList.add('hidden');
                modalContent.classList.remove('modal-hide');
                modalContent.classList.add('modal-show');
                
                // 清空表单
                document.getElementById('loginForm').reset();
            }, 300);
        }
        
        // 点击背景关闭弹窗
        document.getElementById('loginModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeLoginModal();
            }
        });
        
        // ESC键关闭弹窗
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && !document.getElementById('loginModal').classList.contains('hidden')) {
                closeLoginModal();
            }
        });
        
        // 表单提交处理
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const loginUrl = currentUserType === 'student' ? '/student/login' : '/teacher/login';
            
            // 添加登录按钮加载状态
            const loginButton = document.getElementById('loginButton');
            const originalText = loginButton.textContent;
            loginButton.textContent = '登录中...';
            loginButton.disabled = true;
            
            fetch(loginUrl, {
                method: 'POST',
                body: formData
            })
            .then(response => {
                if (response.redirected) {
                    // 登录成功，Flask返回了重定向响应
                    window.location.href = response.url;
                } else if (response.ok) {
                    // 检查响应内容，如果包含dashboard页面则表示成功
                    return response.text().then(html => {
                        if (html.includes('仪表板') || html.includes('dashboard')) {
                            // 登录成功，手动跳转
                            const dashboardUrl = currentUserType === 'student' ? '/student/dashboard' : '/teacher/dashboard';
                            window.location.href = dashboardUrl;
                        } else {
                            // 登录失败，页面包含错误信息
                            alert('登录失败，请检查用户名和密码');
                            loginButton.textContent = originalText;
                            loginButton.disabled = false;
                        }
                    });
                } else {
                    // HTTP错误状态
                    alert('登录失败，请检查用户名和密码');
                    loginButton.textContent = originalText;
                    loginButton.disabled = false;
                }
            })
            .catch(error => {
                console.error('登录错误:', error);
                alert('登录时发生错误，请稍后重试');
                loginButton.textContent = originalText;
                loginButton.disabled = false;
            });
        });
    </script>
</body>
</html> 