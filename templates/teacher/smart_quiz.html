<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ™ºèƒ½å‡ºé¢˜ - AIè¯¾ç¨‹åŠ©æ‰‹ç³»ç»Ÿ</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-orange-50 to-orange-100 min-h-screen">
    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
    <nav class="bg-white shadow-lg">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <h1 class="text-xl font-bold text-orange-600">ğŸ§  æ™ºèƒ½å‡ºé¢˜</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <a href="/teacher/dashboard" class="bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg transition duration-200">
                        è¿”å›ä»ªè¡¨æ¿
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- ä¸»è¦å†…å®¹ -->
    <div class="container mx-auto px-4 py-8">
        <div class="max-w-6xl mx-auto">
            <!-- é¡µé¢æ ‡é¢˜ -->
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-gray-800 mb-4">æ™ºèƒ½å‡ºé¢˜ç³»ç»Ÿ</h2>
                <p class="text-gray-600">æ ¹æ®æ‚¨çš„éœ€æ±‚ï¼ŒAIå°†è‡ªåŠ¨ç”Ÿæˆé¢˜ç›®</p>
            </div>

            <!-- æ¶ˆæ¯æç¤º -->
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    <div class="mb-6">
                        {% for category, message in messages %}
                            <div class="p-4 rounded-lg {% if category == 'success' %}bg-green-100 text-green-700 border border-green-200{% elif category == 'error' %}bg-red-100 text-red-700 border border-red-200{% else %}bg-blue-100 text-blue-700 border border-blue-200{% endif %}">
                                {{ message }}
                            </div>
                        {% endfor %}
                    </div>
                {% endif %}
            {% endwith %}

            <!-- å·¦å³å¸ƒå±€å®¹å™¨ -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- å·¦ä¾§ï¼šå‡ºé¢˜è¡¨å• -->
                <div>
                    <div class="bg-white rounded-xl shadow-lg p-8">
                        <h3 class="text-xl font-semibold text-gray-800 mb-6">å‡ºé¢˜è®¾ç½®</h3>
                        <form method="POST" action="/teacher/smart-quiz">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                                <!-- ç§‘ç›® -->
                                <div>
                                    <label for="subject" class="block text-sm font-medium text-gray-700 mb-2">ç§‘ç›® <span class="text-red-500">*</span></label>
                                    <select id="subject" name="subject" required
                                        class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                                        <option value="">è¯·é€‰æ‹©ç§‘ç›®</option>
                                        <option value="ä¿¡æ¯">ä¿¡æ¯</option>
                                        <option value="æ•°å­¦">æ•°å­¦</option>
                                        <option value="è¯­æ–‡">è¯­æ–‡</option>
                                        <option value="è‹±è¯­">è‹±è¯­</option>
                                    </select>
                                </div>
                                <!-- å¹´çº§ -->
                                <div>
                                    <label for="grade" class="block text-sm font-medium text-gray-700 mb-2">å¹´çº§ <span class="text-red-500">*</span></label>
                                    <select id="grade" name="grade" required
                                        class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                                        <option value="">è¯·é€‰æ‹©å¹´çº§</option>
                                        <option value="åˆä¸­ä¸€å¹´çº§">åˆä¸­ä¸€å¹´çº§</option>
                                        <option value="åˆä¸­äºŒå¹´çº§">åˆä¸­äºŒå¹´çº§</option>
                                        <option value="åˆä¸­ä¸‰å¹´çº§">åˆä¸­ä¸‰å¹´çº§</option>
                                    </select>
                                </div>
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                                <!-- é¢˜ç›®ç±»å‹ -->
                                <div>
                                    <label for="question_type" class="block text-sm font-medium text-gray-700 mb-2">é¢˜ç›®ç±»å‹ <span class="text-red-500">*</span></label>
                                    <select id="question_type" name="question_type" required
                                        class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                                        <option value="é€‰æ‹©é¢˜">é€‰æ‹©é¢˜</option>
                                        <option value="å¡«ç©ºé¢˜">å¡«ç©ºé¢˜</option>
                                        <option value="ç®€ç­”é¢˜">ç®€ç­”é¢˜</option>
                                        <option value="è®¡ç®—é¢˜">è®¡ç®—é¢˜</option>
                                        <option value="åˆ¤æ–­é¢˜">åˆ¤æ–­é¢˜</option>
                                    </select>
                                </div>
                                <!-- é¢˜ç›®æ•°é‡ -->
                                <div>
                                    <label for="num_questions" class="block text-sm font-medium text-gray-700 mb-2">é¢˜ç›®æ•°é‡ <span class="text-red-500">*</span></label>
                                    <input type="number" id="num_questions" name="num_questions" required min="1" max="10"
                                        class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"
                                        value="1">
                                    <p class="mt-1 text-sm text-gray-500">æ¯æ¬¡æœ€å¤šç”Ÿæˆ10é“é¢˜ç›®</p>
                                </div>
                            </div>

                            <!-- è€ƒå¯ŸçŸ¥è¯†ç‚¹ -->
                            <div class="mb-6">
                                <label for="knowledge_points" class="block text-sm font-medium text-gray-700 mb-2">è€ƒå¯ŸçŸ¥è¯†ç‚¹ <span class="text-red-500">*</span></label>
                                <textarea id="knowledge_points" name="knowledge_points" rows="4" required
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"
                                    placeholder="ä¾‹å¦‚ï¼šä»£æ•°å¼ï¼Œæ°§åŒ–è¿˜åŸååº”ï¼Œç»†èƒç»“æ„ï¼ŒåŠ¨è¯çš„æ—¶æ€å’Œè¯­æ€">
                                </textarea>
                                <p class="mt-1 text-sm text-gray-500">è¯·æä¾›è¯¦ç»†çš„çŸ¥è¯†ç‚¹ï¼Œè¿™å°†æœ‰åŠ©äºAIç”Ÿæˆæ›´ç²¾å‡†çš„é¢˜ç›®</p>
                            </div>

                            <!-- æäº¤æŒ‰é’® -->
                            <div class="flex justify-end">
                                <button type="submit" class="bg-orange-500 hover:bg-orange-600 text-white px-6 py-3 rounded-lg font-medium transition duration-200">
                                    ç”Ÿæˆé¢˜ç›®
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- å³ä¾§ï¼šç”Ÿæˆç»“æœæ˜¾ç¤ºåŒºåŸŸ -->
                <div>
                    {% if generated_quizzes %}
                    <div class="bg-white rounded-xl shadow-lg p-8">
                        <h3 class="text-xl font-semibold text-gray-800 mb-6">å·²ç”Ÿæˆçš„é¢˜ç›®</h3>
                        <div class="space-y-8">
                            {% for quiz in generated_quizzes %}
                            <div class="border border-gray-200 rounded-lg p-6 bg-gray-50">
                                <div class="mb-4">
                                    <p class="text-sm text-gray-500 mb-1">é¢˜ç›® {{ loop.index }} (ID: {{ quiz.id }})</p>
                                    <h4 class="text-lg font-medium text-gray-800 mb-2">é¢˜ç›®å†…å®¹:</h4>
                                    <p class="text-gray-700">{{ quiz.content }}</p>
                                </div>
                                <div class="mb-4">
                                    <h4 class="text-lg font-medium text-gray-800 mb-2">æ­£ç¡®ç­”æ¡ˆ:</h4>
                                    <p class="text-green-700">{{ quiz.answer }}</p>
                                </div>
                                {% if quiz.analysis %}
                                <div>
                                    <h4 class="text-lg font-medium text-gray-800 mb-2">é¢˜ç›®åˆ†æ:</h4>
                                    <p class="text-blue-700">{{ quiz.analysis }}</p>
                                </div>
                                {% endif %}
                            </div>
                            {% endfor %}
                        </div>
                        <div class="mt-8 text-center">
                            <a href="/teacher/paper-management" class="bg-indigo-500 hover:bg-indigo-600 text-white px-6 py-3 rounded-lg font-medium transition duration-200">
                                å‰å¾€è¯•å·ç®¡ç†æ·»åŠ é¢˜ç›®
                            </a>
                        </div>
                    </div>
                    {% else %}
                    <!-- åˆå§‹çŠ¶æ€æˆ–æ— ç»“æœæ—¶çš„æç¤º -->
                    <div class="bg-white rounded-xl shadow-lg p-8 text-center min-h-[400px] flex flex-col justify-center items-center">
                        <div class="w-24 h-24 mx-auto mb-6 bg-orange-100 rounded-full flex items-center justify-center">
                            <span class="text-4xl text-orange-500">âœ¨</span>
                        </div>
                        <h3 class="text-xl font-semibold text-gray-700 mb-3">å¼€å§‹æ™ºèƒ½å‡ºé¢˜</h3>
                        <p class="text-gray-500 max-w-sm">åœ¨å·¦ä¾§å¡«å†™å‡ºé¢˜è¦æ±‚ï¼Œç‚¹å‡»â€œç”Ÿæˆé¢˜ç›®â€æŒ‰é’®ï¼ŒAIå°†åœ¨è¿™é‡Œä¸ºæ‚¨å±•ç¤ºç”Ÿæˆçš„é¢˜ç›®ã€‚</p>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</body>
</html> 